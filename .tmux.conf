#############################
#
# オプション
#

# C- と M- の意味
# C-* --> Ctrl + *
# M-* --> Alt + *

# bind-key -r オプション
# repeat-timeミリ秒の間、2度目以降はPrefixを入力せずに連続して上下左右を含む同操作ができる

#------------
# 基本設定
#------------
# C-bのキーバインドを解除する
unbind-key C-b

# prefixキーをC-に変更する
set-option -g prefix C-Space

# 設定ファイルをリロードする
bind-key r source-file ~/.tmux.conf \; display "Reloaded!"

#-----------
# ペイン/ウインドウ関連
#-----------
# ウィンドウのインデックスを1から始める(デフォルト:0)
set-option -g base-index 1

# ペインのインデックスを1から始める(デフォルト:0)
set-window-option -g pane-base-index 1

# Prefix + | で縦に分割
bind-key | split-window -h

# Prefix + - で横に分割
bind-key - split-window -v

# Prefix + Ctrl-h/l でウインドウ切り替え
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# Prefix + hjkl でペインを移動
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Prefix + HJKL でリサイズ可能に
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

# Ctrl-o だけでペインをローテション移動
bind-key -n C-o select-pane -t :.+

# 256色端末を使用する
set-option -g default-terminal "screen-256color"

#----------
# コピー &  ペースト関連
#----------
# viのキーバインドを使用
set-window-option -g mode-keys vi

# Prefix + v でコピーモード開始
bind-key v copy-mode \; display "Copy mode!"

# Prefix + v でコピー開始
bind-key -t vi-copy v begin-selection

# コピーモード中に Prefix + C-v で矩形選択開始
bind-key -t vi-copy C-v rectangle-toggle

## Prefix + y でコピー
bind-key -t vi-copy y copy-selection

if-shell "which pbcopy" '\
  bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy" ;\
'

# tmux 上でvimとクリップボードを共有する
if-shell "which pbcopy" '\
set-option -g default-command "reattach-to-user-namespace -l $SHELL" ;\
'

#---------
# マウス操作
#--------
set-option -g mouse      off

# Prefix + [mM] でマウス機能有効無効切り替え
bind-key m \
   set-option -g mouse          on \; \
   display "Mouse: ON"

bind-key M \
    set-option -g mouse        off \; \
    display "Mouse: OFF"
