#############################
#
# オプション
#

# C- と M- の意味
# C-* --> Ctrl + *
# M-* --> Alt + *

# bind-key -r オプション
# repeat-timeミリ秒の間、2度目以降はPrefixを入力せずに連続して上下左右を含む同操作ができる
#

# tpm の使用方法
# prefix + I
#   plugin をインストール
# prefix + U
#   plugin をアップデート
# prefix + alt + u
#   plugin をアンインストール

#------------
# 基本設定
#------------
# C-bのキーバインドを解除する
unbind-key C-b

# prefixキーをC-に変更する
set-option -g prefix C-Space

# 設定ファイルをリロードする
bind-key r source-file ~/.tmux.conf \; display "Reloaded!"

#-----------
# ペイン/ウインドウ関連
#-----------
# ウィンドウのインデックスを1から始める(デフォルト:0)
set-option -g base-index 1

# ペインのインデックスを1から始める(デフォルト:0)
set-window-option -g pane-base-index 1

# ペインのインデックス番号を再度振り直すように
set-option -g renumber-windows on

# Prefix + | で縦に分割
bind-key | split-window -h

# Prefix + - で横に分割
bind-key - split-window -v

# Prefix + Ctrl-h/l でウインドウ切り替え
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# Prefix + hjkl でペインを移動
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Prefix + HJKL でリサイズ可能に
bind-key -r H resize-pane -L 5
bind-key -r J resize-pane -D 5
bind-key -r K resize-pane -U 5
bind-key -r L resize-pane -R 5

# Ctrl-o だけでペインをローテション移動
bind-key -n C-o select-pane -t :.+

# 256色端末を使用する
set-option -g default-terminal "screen-256color"
set -g terminal-overrides 'xterm:colors=256'

# windowの移動
bind-key -n C-k next-window
bind-key -n c-j previous-window

# セッションの移動
bind-key P switch-client -p
bind-key N switch-client -n

# ウィンドウの順番を入れ替える
bind-key -r < swap-window -t -1
bind-key -r > swap-window -t +1

# コマンドを複数画面に実行する
bind-key e set-window-option synchronize-panes on
bind-key E set-window-option synchronize-panes off

#----------
# コピー &  ペースト関連
#----------
# viのキーバインドを使用
set-window-option -g mode-keys vi

# Prefix + v でコピーモード開始
bind-key v copy-mode \; display "Copy mode!"

# Prefix + v でコピー開始
bind-key -T copy-mode-vi v send-keys -X begin-selection

# コピーモード中に Prefix + C-v で矩形選択開始
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

#---------
# マウス操作
#--------
set-option -g mouse      off

# Prefix + [mM] でマウス機能有効無効切り替え
bind-key m \
   set-option -g mouse          on \; \
   display "Mouse: ON"

bind-key M \
    set-option -g mouse        off \; \
    display "Mouse: OFF"

#---------
# ステータスバー
#--------
# ステータスバーをトップに配置する
set-option -g status-position top

# センタライズ（主にウィンドウ番号など）
set-option -g status-justify centre

# 左上のステータスバー
# #H => マシン名
# #P => ペイン番号
set-option -g status-left '#H:[#P]'

# 右上のステータスバー
set-option -g status-right '[%Y-%m-%d(%a) %H:%M]'


#---------
# tpm 設定
#--------
# tpmの管理
set-option -g @plugin 'tmux-plugins/tpm'

# peco を使用したてインタラクティブにクリップボードへ貼り付けることができるようになる
set-option -g @plugin 'knakayama/tmux-fuc'

# システムのクリップボードにコピー
# Debian / Ubuntu: $ sudo apt-get install xclip or $ sudo apt-get install xsel
# Red hat / CentOS: $ yum install xclip or $ yum install xsel
set-option -g @plugin 'tmux-plugins/tmux-yank'

run '~/.tmux/plugins/tpm/tpm'

#---------
# color設定
#--------
#### COLOUR (Solarized dark)

# default statusbar colors
set-option -g status-bg black #base02
set-option -g status-fg yellow #yellow
set-option -g status-attr default

# default window title colors
set-window-option -g window-status-fg brightblue #base0
set-window-option -g window-status-bg default
#set-window-option -g window-status-attr dim

# active window title colors
set-window-option -g window-status-current-fg brightred #orange
set-window-option -g window-status-current-bg default
#set-window-option -g window-status-current-attr bright

# pane border
set-option -g pane-border-fg black #base02
set-option -g pane-active-border-fg brightgreen #base01

# message text
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# pane number display
set-option -g display-panes-active-colour blue #blue
set-option -g display-panes-colour brightred #orange

# clock
set-window-option -g clock-mode-colour green #green

# bell
set-window-option -g window-status-bell-style fg=black,bg=red #base02, red

